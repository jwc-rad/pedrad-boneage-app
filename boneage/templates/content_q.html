<h2>Content for Menu</h2>
{% if content['path_image'] %}

<img
  src="{{ url_for('static', filename=content['path_image']) }}"
  alt="Org Image"
  style="max-width: 100%; height: auto"
/>
{% else %}

<p>No image available.</p>

{% endif %}

<!-- Chart.js canvas container -->
<div style="width: 80%; margin: auto">
  <canvas id="myChart"></canvas>
</div>

<!-- Include additional JavaScript for Plotly click events -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var numbers = {{ content.predictions | safe }};
    var numbers = [0,1,2,3];
    var labels = ['A', 'B', 'C', 'D'];

    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{
          label: 'Values',
          data: numbers,
          backgroundColor: 'rgba(54, 162, 235, 0.6)',
          borderColor: 'rgba(54, 162, 235, 1)',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        scales: {
          x: {
            title: {
              display: true,
              text: 'Category'
            }
          },
          y: {
            title: {
              display: true,
              text: 'Value'
            }
          }
        },
        plugins: {
          tooltip: {
            callbacks: {
              label: function(context) {
                var labelIndex = context.dataIndex;
                return 'Value: ' + numbers[labelIndex];
              }
            }
          }
        },
        onClick: function(event) {
          var activePoints = myChart.getElementsAtEventForMode(event, 'index', {intersect: true});
          if (activePoints.length > 0) {
            var index = activePoints[0].index;
            var textToCopy = numbers[index];

            // Update main page text
            updateMainPageText(textToCopy);

            // Example: Copy text to clipboard
            copyToClipboard(textToCopy);
          }
        }
      }
    });

    // Function to copy text to clipboard
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text)
        .then(function() {
          console.log('Text copied to clipboard:', text);
        })
        .catch(function(err) {
          console.error('Failed to copy text:', err);
        });
    }

    // Function to update text on the main page
    function updateMainPageText(text) {
      // Replace '#mainPageText' with the ID or class of the element where you want to display the text
      document.getElementById('mainPageText').textContent = text;
    }
  });
</script>
